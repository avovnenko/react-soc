{"ast":null,"code":"import _defineProperty from \"/Users/avovnenko/PhpstormProjects/ReactApp/01-first-project/react-2/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { usersAPI } from \"../api/api\";\nconst SHOW_MORE = 'SHOW-MORE',\n      SET_USERS = 'SET-USERS',\n      SET_TOTAL_USERS_COUNT = 'SET-TOTAL-USERS-COUNT',\n      FOLLOW = 'FOLLOW',\n      UNFOLLOW = 'UNFOLLOW',\n      SET_CURRENT_PAGE = 'SET-CURRENT-PAGE',\n      TURN_ON_PRELOADER = 'TURN-ON-PRELOADER',\n      TURN_OFF_PRELOADER = 'TURN-OFF-PRELOADER',\n      FOLLOWING_IN_PROGRESS = 'FOLLOWING-IN-PROGRESS';\nlet initialState = {\n  users: [],\n  showUsers: 2,\n  pageSize: 5,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            return _objectSpread({}, u, {\n              followed: true\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case UNFOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            return _objectSpread({}, u, {\n              followed: false\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case SET_USERS:\n      return _objectSpread({}, state, {\n        users: [...action.users]\n      });\n\n    case SET_TOTAL_USERS_COUNT:\n      return _objectSpread({}, state, {\n        totalUsersCount: action.totalUsersCount\n      });\n\n    case SHOW_MORE:\n      return _objectSpread({}, state, {\n        showUsers: state.showUsers + 2\n      });\n\n    case SET_CURRENT_PAGE:\n      return _objectSpread({}, state, {\n        currentPage: action.currentPage\n      });\n\n    case TURN_ON_PRELOADER:\n      return _objectSpread({}, state, {\n        isFetching: true\n      });\n\n    case TURN_OFF_PRELOADER:\n      return _objectSpread({}, state, {\n        isFetching: false\n      });\n\n    case FOLLOWING_IN_PROGRESS:\n      return _objectSpread({}, state, {\n        followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(i => i !== action.userId)\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default usersReducer;\nexport const followSuccess = userId => ({\n  type: FOLLOW,\n  userId: userId\n});\nexport const unfollowSuccess = userId => ({\n  type: UNFOLLOW,\n  userId: userId\n});\nexport const setUsers = (users, totalUsersCount) => ({\n  type: SET_USERS,\n  users: users,\n  totalUsersCount: totalUsersCount\n});\nexport const showMore = () => ({\n  type: SHOW_MORE\n});\nexport const setTotalUsersCount = totalUsersCount => ({\n  type: SET_TOTAL_USERS_COUNT,\n  totalUsersCount\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const turnOnPreloader = () => ({\n  type: TURN_ON_PRELOADER\n});\nexport const turnOffPreloader = () => ({\n  type: TURN_OFF_PRELOADER\n});\nexport const followingInProgress = (isFetching, userId) => ({\n  type: FOLLOWING_IN_PROGRESS,\n  isFetching,\n  userId\n});\nexport const getUsers = (currentPage, pageSize) => dispatch => {\n  dispatch(turnOnPreloader);\n  usersAPI.getUsers(currentPage, pageSize).then(response => {\n    dispatch(setUsers(response.items));\n    dispatch(setTotalUsersCount(response.totalCount));\n  }).then(() => {\n    dispatch(turnOffPreloader);\n  });\n};\nexport const followUser = userId => dispatch => {\n  dispatch(followingInProgress(true, userId));\n  usersAPI.followUser(userId).then(response => {\n    if (response.resultCode === 0) {\n      dispatch(follow(userId));\n    }\n\n    dispatch(followingInProgress(false, userId));\n  });\n};\nexport const unFollowUser = userId => dispatch => {\n  dispatch(followingInProgress(true, userId));\n  usersAPI.unfollowUser(userId).then(response => {\n    if (response.resultCode === 0) {\n      dispatch(unfollow(userId));\n    }\n\n    dispatch(followingInProgress(false, userId));\n  });\n};","map":{"version":3,"sources":["/Users/avovnenko/PhpstormProjects/ReactApp/01-first-project/react-2/src/redux/usersReducer.js"],"names":["usersAPI","SHOW_MORE","SET_USERS","SET_TOTAL_USERS_COUNT","FOLLOW","UNFOLLOW","SET_CURRENT_PAGE","TURN_ON_PRELOADER","TURN_OFF_PRELOADER","FOLLOWING_IN_PROGRESS","initialState","users","showUsers","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","state","action","type","map","u","id","userId","followed","filter","i","followSuccess","unfollowSuccess","setUsers","showMore","setTotalUsersCount","setCurrentPage","turnOnPreloader","turnOffPreloader","getUsers","dispatch","then","response","items","totalCount","followUser","resultCode","follow","unFollowUser","unfollowUser","unfollow"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../api/api\";\n\nconst SHOW_MORE = 'SHOW-MORE',\n\tSET_USERS = 'SET-USERS',\n\tSET_TOTAL_USERS_COUNT = 'SET-TOTAL-USERS-COUNT',\n\tFOLLOW = 'FOLLOW',\n\tUNFOLLOW = 'UNFOLLOW',\n\tSET_CURRENT_PAGE = 'SET-CURRENT-PAGE',\n\tTURN_ON_PRELOADER = 'TURN-ON-PRELOADER',\n\tTURN_OFF_PRELOADER = 'TURN-OFF-PRELOADER',\n\tFOLLOWING_IN_PROGRESS = 'FOLLOWING-IN-PROGRESS';\n\nlet initialState = {\n\tusers: [],\n\tshowUsers: 2,\n\tpageSize: 5,\n\ttotalUsersCount: 0,\n\tcurrentPage: 1,\n\tisFetching: false,\n\tfollowingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n\n\tswitch (action.type) {\n\t\tcase FOLLOW:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: state.users.map(u => {\n\t\t\t\t\tif (u.id === action.userId) {\n\t\t\t\t\t\treturn {...u, followed: true};\n\t\t\t\t\t}\n\t\t\t\t\treturn u;\n\t\t\t\t}),\n\t\t\t};\n\n\t\tcase UNFOLLOW:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: state.users.map(u => {\n\t\t\t\t\tif (u.id === action.userId) {\n\t\t\t\t\t\treturn {...u, followed: false};\n\t\t\t\t\t}\n\t\t\t\t\treturn u;\n\t\t\t\t}),\n\t\t\t};\n\n\t\tcase SET_USERS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: [...action.users]\n\t\t\t};\n\n\t\tcase SET_TOTAL_USERS_COUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttotalUsersCount: action.totalUsersCount\n\t\t\t};\n\n\t\tcase SHOW_MORE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tshowUsers: state.showUsers + 2\n\t\t\t};\n\n\t\tcase SET_CURRENT_PAGE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPage: action.currentPage\n\t\t\t};\n\n\t\tcase TURN_ON_PRELOADER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true\n\t\t\t};\n\n\t\tcase TURN_OFF_PRELOADER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false\n\t\t\t};\n\n\t\tcase FOLLOWING_IN_PROGRESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfollowingInProgress: action.isFetching\n\t\t\t\t\t? [...state.followingInProgress, action.userId]\n\t\t\t\t\t: state.followingInProgress.filter(i => i !== action.userId)\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default usersReducer;\n\nexport const followSuccess = (userId) => ({type: FOLLOW, userId: userId});\nexport const unfollowSuccess = (userId) => ({type: UNFOLLOW, userId: userId});\nexport const setUsers = (users, totalUsersCount) => ({type: SET_USERS, users: users, totalUsersCount: totalUsersCount});\nexport const showMore = () => ({type: SHOW_MORE});\nexport const setTotalUsersCount = (totalUsersCount) => ({type: SET_TOTAL_USERS_COUNT, totalUsersCount});\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage});\nexport const turnOnPreloader = () => ({type: TURN_ON_PRELOADER});\nexport const turnOffPreloader = () => ({type: TURN_OFF_PRELOADER});\nexport const followingInProgress = (isFetching, userId) => ({type: FOLLOWING_IN_PROGRESS, isFetching, userId});\n\n\nexport const getUsers = (currentPage, pageSize) =>\n\t(dispatch) => {\n\t\tdispatch(turnOnPreloader);\n\n\t\tusersAPI.getUsers(currentPage, pageSize)\n\t\t\t.then(response => {\n\t\t\t\tdispatch(setUsers(response.items));\n\t\t\t\tdispatch(setTotalUsersCount(response.totalCount));\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tdispatch(turnOffPreloader);\n\t\t\t});\n\t};\nexport const followUser = (userId) =>\n\t(dispatch) => {\n\t\tdispatch(followingInProgress(true, userId));\n\t\tusersAPI.followUser(userId)\n\t\t\t.then(response => {\n\t\t\t\tif (response.resultCode === 0) {\n\t\t\t\t\tdispatch(follow(userId));\n\t\t\t\t}\n\t\t\t\tdispatch(followingInProgress(false, userId));\n\t\t\t});\n\t};\nexport const unFollowUser = (userId) =>\n\t(dispatch) => {\n\t\tdispatch(followingInProgress(true, userId));\n\t\tusersAPI.unfollowUser(userId)\n\t\t\t.then(response => {\n\t\t\t\tif (response.resultCode === 0) {\n\t\t\t\t\tdispatch(unfollow(userId));\n\t\t\t\t}\n\t\t\t\tdispatch(followingInProgress(false, userId));\n\t\t\t});\n\t};\n\n"]},"metadata":{},"sourceType":"module"}