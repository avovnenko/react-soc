{"ast":null,"code":"import _objectSpread from \"/Users/avovnenko/PhpstormProjects/ReactApp/01-first-project/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { usersAPI } from \"../api/api\";\nconst SHOW_MORE = 'users/SHOW-MORE',\n      SET_USERS = 'users/SET-USERS',\n      SET_TOTAL_USERS_COUNT = 'users/SET-TOTAL-USERS-COUNT',\n      TOGGLE_FOLLOW = 'users/TOGGLE-FOLLOW',\n      SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE',\n      TURN_ON_PRELOADER = 'users/TURN-ON-PRELOADER',\n      TURN_OFF_PRELOADER = 'users/TURN-OFF-PRELOADER',\n      FOLLOWING_IN_PROGRESS = 'users/FOLLOWING-IN-PROGRESS';\nlet initialState = {\n  users: [],\n  showUsers: 2,\n  pageSize: 5,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case TOGGLE_FOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            console.log(state);\n            console.log(u);\n            return _objectSpread({}, u, {\n              followed: !u.followed\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case SET_USERS:\n      return _objectSpread({}, state, {\n        users: [...action.users]\n      });\n\n    case SET_TOTAL_USERS_COUNT:\n      return _objectSpread({}, state, {\n        totalUsersCount: action.totalUsersCount\n      });\n\n    case SHOW_MORE:\n      return _objectSpread({}, state, {\n        showUsers: state.showUsers + 2\n      });\n\n    case SET_CURRENT_PAGE:\n      return _objectSpread({}, state, {\n        currentPage: action.currentPage\n      });\n\n    case TURN_ON_PRELOADER:\n      return _objectSpread({}, state, {\n        isFetching: true\n      });\n\n    case TURN_OFF_PRELOADER:\n      return _objectSpread({}, state, {\n        isFetching: false\n      });\n\n    case FOLLOWING_IN_PROGRESS:\n      return _objectSpread({}, state, {\n        followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(i => i !== action.userId)\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default usersReducer; // export const followSuccess = (userId) => ({type: FOLLOW, userId});\n// export const unfollowSuccess = (userId) => ({type: UNFOLLOW, userId});\n\nexport const toggleFollowSuccess = userId => ({\n  type: TOGGLE_FOLLOW,\n  userId\n});\nexport const setUsers = (users, totalUsersCount) => ({\n  type: SET_USERS,\n  users,\n  totalUsersCount\n});\nexport const showMore = () => ({\n  type: SHOW_MORE\n});\nexport const setTotalUsersCount = totalUsersCount => ({\n  type: SET_TOTAL_USERS_COUNT,\n  totalUsersCount\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const turnOnPreloader = () => ({\n  type: TURN_ON_PRELOADER\n});\nexport const turnOffPreloader = () => ({\n  type: TURN_OFF_PRELOADER\n});\nexport const followingInProgress = (isFetching, userId) => ({\n  type: FOLLOWING_IN_PROGRESS,\n  isFetching,\n  userId\n});\nexport const requestUsers = (currentPage, pageSize) => async dispatch => {\n  dispatch(turnOnPreloader);\n  let response = await usersAPI.getUsers(currentPage, pageSize);\n  dispatch(setUsers(response.items));\n  dispatch(setTotalUsersCount(response.totalCount));\n  dispatch(turnOffPreloader);\n};\nexport const toggleFollow = (toggle, userId) => async dispatch => {\n  dispatch(followingInProgress(true, userId));\n  debugger;\n  let response = (await toggle) ? usersAPI.followUser(userId) : usersAPI.unfollowUser(userId);\n\n  if (response.resultCode === 0) {\n    dispatch(toggleFollowSuccess(userId));\n  }\n\n  dispatch(followingInProgress(false, userId));\n}; // export const followUser = (userId) =>\n// \tasync (dispatch) => {\n// \t\tconsole.log(dispatch);\n// \t\tdispatch(followingInProgress(true, userId));\n// \t\tlet response = await usersAPI.followUser(userId);\n//\n// \t\tif (response.resultCode === 0) {\n// \t\t\tdispatch(followSuccess(userId));\n// \t\t}\n// \t\tdispatch(followingInProgress(false, userId));\n// \t};\n// export const unFollowUser = (userId) =>\n// \tasync (dispatch) => {\n// \t\tdispatch(followingInProgress(true, userId));\n// \t\tlet response = await usersAPI.unfollowUser(userId);\n//\n// \t\tif (response.resultCode === 0) {\n// \t\t\tdispatch(unfollowSuccess(userId));\n// \t\t}\n// \t\tdispatch(followingInProgress(false, userId));\n// \t};","map":{"version":3,"sources":["/Users/avovnenko/PhpstormProjects/ReactApp/01-first-project/react-2/src/redux/usersReducer.js"],"names":["usersAPI","SHOW_MORE","SET_USERS","SET_TOTAL_USERS_COUNT","TOGGLE_FOLLOW","SET_CURRENT_PAGE","TURN_ON_PRELOADER","TURN_OFF_PRELOADER","FOLLOWING_IN_PROGRESS","initialState","users","showUsers","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","state","action","type","map","u","id","userId","console","log","followed","filter","i","toggleFollowSuccess","setUsers","showMore","setTotalUsersCount","setCurrentPage","turnOnPreloader","turnOffPreloader","requestUsers","dispatch","response","getUsers","items","totalCount","toggleFollow","toggle","followUser","unfollowUser","resultCode"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../api/api\";\n\nconst SHOW_MORE = 'users/SHOW-MORE',\n\tSET_USERS = 'users/SET-USERS',\n\tSET_TOTAL_USERS_COUNT = 'users/SET-TOTAL-USERS-COUNT',\n\tTOGGLE_FOLLOW = 'users/TOGGLE-FOLLOW',\n\tSET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE',\n\tTURN_ON_PRELOADER = 'users/TURN-ON-PRELOADER',\n\tTURN_OFF_PRELOADER = 'users/TURN-OFF-PRELOADER',\n\tFOLLOWING_IN_PROGRESS = 'users/FOLLOWING-IN-PROGRESS';\n\nlet initialState = {\n\tusers: [],\n\tshowUsers: 2,\n\tpageSize: 5,\n\ttotalUsersCount: 0,\n\tcurrentPage: 1,\n\tisFetching: false,\n\tfollowingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n\n\tswitch (action.type) {\n\t\tcase TOGGLE_FOLLOW:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: state.users.map(u => {\n\t\t\t\t\tif (u.id === action.userId) {\n\t\t\t\t\t\tconsole.log(state);\n\t\t\t\t\t\tconsole.log(u);\n\t\t\t\t\t\treturn {...u, followed: !u.followed};\n\t\t\t\t\t}\n\t\t\t\t\treturn u;\n\t\t\t\t}),\n\t\t\t};\n\n\t\tcase SET_USERS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: [...action.users]\n\t\t\t};\n\n\t\tcase SET_TOTAL_USERS_COUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttotalUsersCount: action.totalUsersCount\n\t\t\t};\n\n\t\tcase SHOW_MORE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tshowUsers: state.showUsers + 2\n\t\t\t};\n\n\t\tcase SET_CURRENT_PAGE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPage: action.currentPage\n\t\t\t};\n\n\t\tcase TURN_ON_PRELOADER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true\n\t\t\t};\n\n\t\tcase TURN_OFF_PRELOADER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false\n\t\t\t};\n\n\t\tcase FOLLOWING_IN_PROGRESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfollowingInProgress: action.isFetching\n\t\t\t\t\t? [...state.followingInProgress, action.userId]\n\t\t\t\t\t: state.followingInProgress.filter(i => i !== action.userId)\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default usersReducer;\n\n// export const followSuccess = (userId) => ({type: FOLLOW, userId});\n// export const unfollowSuccess = (userId) => ({type: UNFOLLOW, userId});\nexport const toggleFollowSuccess = (userId) => ({type: TOGGLE_FOLLOW, userId});\n\nexport const setUsers = (users, totalUsersCount) => ({type: SET_USERS, users, totalUsersCount});\nexport const showMore = () => ({type: SHOW_MORE});\nexport const setTotalUsersCount = (totalUsersCount) => ({type: SET_TOTAL_USERS_COUNT, totalUsersCount});\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage});\nexport const turnOnPreloader = () => ({type: TURN_ON_PRELOADER});\nexport const turnOffPreloader = () => ({type: TURN_OFF_PRELOADER});\nexport const followingInProgress = (isFetching, userId) => ({type: FOLLOWING_IN_PROGRESS, isFetching, userId});\n\n\nexport const requestUsers = (currentPage, pageSize) =>\n\tasync (dispatch) => {\n\t\tdispatch(turnOnPreloader);\n\n\t\tlet response = await usersAPI.getUsers(currentPage, pageSize)\n\n\t\tdispatch(setUsers(response.items));\n\t\tdispatch(setTotalUsersCount(response.totalCount));\n\n\t\tdispatch(turnOffPreloader);\n\t};\nexport const toggleFollow = (toggle, userId) =>\n\tasync (dispatch) => {\n\t\tdispatch(followingInProgress(true, userId));\n\t\tdebugger;\n\t\tlet response = await toggle ? usersAPI.followUser(userId) : usersAPI.unfollowUser(userId);\n\n\t\tif (response.resultCode === 0) {\n\t\t\tdispatch(toggleFollowSuccess(userId));\n\t\t}\n\n\t\tdispatch(followingInProgress(false, userId));\n\t};\n\t// export const followUser = (userId) =>\n\t// \tasync (dispatch) => {\n\t// \t\tconsole.log(dispatch);\n\t// \t\tdispatch(followingInProgress(true, userId));\n\t// \t\tlet response = await usersAPI.followUser(userId);\n\t//\n\t// \t\tif (response.resultCode === 0) {\n\t// \t\t\tdispatch(followSuccess(userId));\n\t// \t\t}\n\t// \t\tdispatch(followingInProgress(false, userId));\n\t// \t};\n\t// export const unFollowUser = (userId) =>\n\t// \tasync (dispatch) => {\n\t// \t\tdispatch(followingInProgress(true, userId));\n\t// \t\tlet response = await usersAPI.unfollowUser(userId);\n\t//\n\t// \t\tif (response.resultCode === 0) {\n\t// \t\t\tdispatch(unfollowSuccess(userId));\n\t// \t\t}\n\t// \t\tdispatch(followingInProgress(false, userId));\n\t// \t};\n\n"]},"metadata":{},"sourceType":"module"}