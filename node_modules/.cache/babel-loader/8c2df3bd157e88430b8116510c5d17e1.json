{"ast":null,"code":"import _objectSpread from \"/Users/avovnenko/PhpstormProjects/ReactApp/01-first-project/react-2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { usersAPI } from \"../api/api\";\nconst SHOW_MORE = 'users/SHOW-MORE',\n      SET_USERS = 'users/SET-USERS',\n      SET_TOTAL_USERS_COUNT = 'users/SET-TOTAL-USERS-COUNT',\n      TOGGLE_FOLLOW = 'users/TOGGLE-FOLLOW',\n      FOLLOW = 'users/FOLLOW',\n      UNFOLLOW = 'users/UNFOLLOW',\n      SET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE',\n      TURN_ON_PRELOADER = 'users/TURN-ON-PRELOADER',\n      TURN_OFF_PRELOADER = 'users/TURN-OFF-PRELOADER',\n      FOLLOWING_IN_PROGRESS = 'users/FOLLOWING-IN-PROGRESS';\nlet initialState = {\n  users: [],\n  showUsers: 2,\n  pageSize: 5,\n  totalUsersCount: 0,\n  currentPage: 1,\n  isFetching: false,\n  followingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case FOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            return _objectSpread({}, u, {\n              followed: true\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case UNFOLLOW:\n      return _objectSpread({}, state, {\n        users: state.users.map(u => {\n          if (u.id === action.userId) {\n            return _objectSpread({}, u, {\n              followed: false\n            });\n          }\n\n          return u;\n        })\n      });\n\n    case SET_USERS:\n      return _objectSpread({}, state, {\n        users: [...action.users]\n      });\n\n    case SET_TOTAL_USERS_COUNT:\n      return _objectSpread({}, state, {\n        totalUsersCount: action.totalUsersCount\n      });\n\n    case SHOW_MORE:\n      return _objectSpread({}, state, {\n        showUsers: state.showUsers + 2\n      });\n\n    case SET_CURRENT_PAGE:\n      return _objectSpread({}, state, {\n        currentPage: action.currentPage\n      });\n\n    case TURN_ON_PRELOADER:\n      return _objectSpread({}, state, {\n        isFetching: true\n      });\n\n    case TURN_OFF_PRELOADER:\n      return _objectSpread({}, state, {\n        isFetching: false\n      });\n\n    case FOLLOWING_IN_PROGRESS:\n      return _objectSpread({}, state, {\n        followingInProgress: action.isFetching ? [...state.followingInProgress, action.userId] : state.followingInProgress.filter(i => i !== action.userId)\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default usersReducer;\nexport const followSuccess = userId => ({\n  type: FOLLOW,\n  userId\n});\nexport const unfollowSuccess = userId => ({\n  type: UNFOLLOW,\n  userId\n});\nexport const toggleFollowSuccess = userId => ({\n  type: TOGGLE_FOLLOW,\n  userId\n});\nexport const setUsers = (users, totalUsersCount) => ({\n  type: SET_USERS,\n  users,\n  totalUsersCount\n});\nexport const showMore = () => ({\n  type: SHOW_MORE\n});\nexport const setTotalUsersCount = totalUsersCount => ({\n  type: SET_TOTAL_USERS_COUNT,\n  totalUsersCount\n});\nexport const setCurrentPage = currentPage => ({\n  type: SET_CURRENT_PAGE,\n  currentPage\n});\nexport const turnOnPreloader = () => ({\n  type: TURN_ON_PRELOADER\n});\nexport const turnOffPreloader = () => ({\n  type: TURN_OFF_PRELOADER\n});\nexport const followingInProgress = (isFetching, userId) => ({\n  type: FOLLOWING_IN_PROGRESS,\n  isFetching,\n  userId\n});\nexport const requestUsers = (currentPage, pageSize) => async dispatch => {\n  dispatch(turnOnPreloader);\n  let response = await usersAPI.getUsers(currentPage, pageSize);\n  dispatch(setUsers(response.items));\n  dispatch(setTotalUsersCount(response.totalCount));\n  dispatch(turnOffPreloader);\n};\nexport const toggleFollow = usersId => {\n  async dispatch => {\n    dispatch(followingInProgress(true, userId));\n    let response = await usersAPI.followUser(userId);\n\n    if (response.resultCode === 0) {\n      dispatch(toggleSuccess(userId));\n    }\n\n    dispatch(followingInProgress(false, userId));\n  };\n};\nexport const followUser = userId => async dispatch => {\n  console.log(store);\n  dispatch(followingInProgress(true, userId));\n  let response = await usersAPI.followUser(userId);\n\n  if (response.resultCode === 0) {\n    dispatch(followSuccess(userId));\n  }\n\n  dispatch(followingInProgress(false, userId));\n};\nexport const unFollowUser = userId => async dispatch => {\n  dispatch(followingInProgress(true, userId));\n  let response = await usersAPI.unfollowUser(userId);\n\n  if (response.resultCode === 0) {\n    dispatch(unfollowSuccess(userId));\n  }\n\n  dispatch(followingInProgress(false, userId));\n};","map":{"version":3,"sources":["/Users/avovnenko/PhpstormProjects/ReactApp/01-first-project/react-2/src/redux/usersReducer.js"],"names":["usersAPI","SHOW_MORE","SET_USERS","SET_TOTAL_USERS_COUNT","TOGGLE_FOLLOW","FOLLOW","UNFOLLOW","SET_CURRENT_PAGE","TURN_ON_PRELOADER","TURN_OFF_PRELOADER","FOLLOWING_IN_PROGRESS","initialState","users","showUsers","pageSize","totalUsersCount","currentPage","isFetching","followingInProgress","usersReducer","state","action","type","map","u","id","userId","followed","filter","i","followSuccess","unfollowSuccess","toggleFollowSuccess","setUsers","showMore","setTotalUsersCount","setCurrentPage","turnOnPreloader","turnOffPreloader","requestUsers","dispatch","response","getUsers","items","totalCount","toggleFollow","usersId","followUser","resultCode","toggleSuccess","console","log","store","unFollowUser","unfollowUser"],"mappings":"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","sourcesContent":["import {usersAPI} from \"../api/api\";\n\nconst SHOW_MORE = 'users/SHOW-MORE',\n\tSET_USERS = 'users/SET-USERS',\n\tSET_TOTAL_USERS_COUNT = 'users/SET-TOTAL-USERS-COUNT',\n\tTOGGLE_FOLLOW = 'users/TOGGLE-FOLLOW',\n\tFOLLOW = 'users/FOLLOW',\n\tUNFOLLOW = 'users/UNFOLLOW',\n\tSET_CURRENT_PAGE = 'users/SET-CURRENT-PAGE',\n\tTURN_ON_PRELOADER = 'users/TURN-ON-PRELOADER',\n\tTURN_OFF_PRELOADER = 'users/TURN-OFF-PRELOADER',\n\tFOLLOWING_IN_PROGRESS = 'users/FOLLOWING-IN-PROGRESS';\n\nlet initialState = {\n\tusers: [],\n\tshowUsers: 2,\n\tpageSize: 5,\n\ttotalUsersCount: 0,\n\tcurrentPage: 1,\n\tisFetching: false,\n\tfollowingInProgress: []\n};\n\nconst usersReducer = (state = initialState, action) => {\n\n\tswitch (action.type) {\n\t\tcase FOLLOW:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: state.users.map(u => {\n\t\t\t\t\tif (u.id === action.userId) {\n\t\t\t\t\t\treturn {...u, followed: true};\n\t\t\t\t\t}\n\t\t\t\t\treturn u;\n\t\t\t\t}),\n\t\t\t};\n\n\t\tcase UNFOLLOW:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: state.users.map(u => {\n\t\t\t\t\tif (u.id === action.userId) {\n\t\t\t\t\t\treturn {...u, followed: false};\n\t\t\t\t\t}\n\t\t\t\t\treturn u;\n\t\t\t\t}),\n\t\t\t};\n\n\t\tcase SET_USERS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusers: [...action.users]\n\t\t\t};\n\n\t\tcase SET_TOTAL_USERS_COUNT:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\ttotalUsersCount: action.totalUsersCount\n\t\t\t};\n\n\t\tcase SHOW_MORE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tshowUsers: state.showUsers + 2\n\t\t\t};\n\n\t\tcase SET_CURRENT_PAGE:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tcurrentPage: action.currentPage\n\t\t\t};\n\n\t\tcase TURN_ON_PRELOADER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: true\n\t\t\t};\n\n\t\tcase TURN_OFF_PRELOADER:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisFetching: false\n\t\t\t};\n\n\t\tcase FOLLOWING_IN_PROGRESS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tfollowingInProgress: action.isFetching\n\t\t\t\t\t? [...state.followingInProgress, action.userId]\n\t\t\t\t\t: state.followingInProgress.filter(i => i !== action.userId)\n\t\t\t};\n\t\tdefault:\n\t\t\treturn state;\n\t}\n};\n\nexport default usersReducer;\n\nexport const followSuccess = (userId) => ({type: FOLLOW, userId});\nexport const unfollowSuccess = (userId) => ({type: UNFOLLOW, userId});\nexport const toggleFollowSuccess = (userId) => ({type: TOGGLE_FOLLOW, userId});\n\nexport const setUsers = (users, totalUsersCount) => ({type: SET_USERS, users, totalUsersCount});\nexport const showMore = () => ({type: SHOW_MORE});\nexport const setTotalUsersCount = (totalUsersCount) => ({type: SET_TOTAL_USERS_COUNT, totalUsersCount});\nexport const setCurrentPage = (currentPage) => ({type: SET_CURRENT_PAGE, currentPage});\nexport const turnOnPreloader = () => ({type: TURN_ON_PRELOADER});\nexport const turnOffPreloader = () => ({type: TURN_OFF_PRELOADER});\nexport const followingInProgress = (isFetching, userId) => ({type: FOLLOWING_IN_PROGRESS, isFetching, userId});\n\n\nexport const requestUsers = (currentPage, pageSize) =>\n\tasync (dispatch) => {\n\t\tdispatch(turnOnPreloader);\n\n\t\tlet response = await usersAPI.getUsers(currentPage, pageSize)\n\n\t\tdispatch(setUsers(response.items));\n\t\tdispatch(setTotalUsersCount(response.totalCount));\n\n\t\tdispatch(turnOffPreloader);\n\t};\nexport const toggleFollow = (usersId) => {\n\tasync (dispatch) => {\n\t\tdispatch(followingInProgress(true, userId));\n\n\t\tlet response = await usersAPI.followUser(userId)\n\n\t\tif (response.resultCode === 0) {\n\t\t\tdispatch(toggleSuccess(userId));\n\t\t}\n\n\t\tdispatch(followingInProgress(false, userId));\n\t}\n}\nexport const followUser = (userId) =>\n\tasync (dispatch) => {\n\t\tconsole.log(store);\n\t\tdispatch(followingInProgress(true, userId));\n\t\tlet response = await usersAPI.followUser(userId)\n\n\t\tif (response.resultCode === 0) {\n\t\t\tdispatch(followSuccess(userId));\n\t\t}\n\t\tdispatch(followingInProgress(false, userId));\n\t};\nexport const unFollowUser = (userId) =>\n\tasync (dispatch) => {\n\t\tdispatch(followingInProgress(true, userId));\n\t\tlet response = await usersAPI.unfollowUser(userId)\n\n\t\tif (response.resultCode === 0) {\n\t\t\tdispatch(unfollowSuccess(userId));\n\t\t}\n\t\tdispatch(followingInProgress(false, userId));\n\t};\n\n"]},"metadata":{},"sourceType":"module"}